import{r as t,C as N,u as b,j as e,$ as P,B as r,l as k}from"./index-DwJcsY6s.js";import{C as S,a as T,b as L,c as E,B as n}from"./button-BUcNE2fQ.js";import{h as O,S as q,L as c,I as d}from"./react-google-recaptcha-v3.esm-BIWXyxg6.js";function $(){const[a,x]=t.useState(""),[l,p]=t.useState(""),[h,m]=t.useState(!1),[f,w]=t.useState(null),[g,i]=t.useState(!1),[u,A]=t.useState(!1),[B,j]=t.useState("");t.useContext(N);const y=b(),v=t.useCallback(s=>{console.log("Token reftched"),w(s)},[]),C=async()=>{if(a.trim().length==0||l.trim().length==0){r.error("Some fields are empty");return}m(!0);try{const s=await k({email:a,password:l,recaptcha_token:f});s?s.success?(localStorage.setItem("jwtToken",s.data.jwtToken),localStorage.setItem("username",s.data.userName),window.location.reload()):r.error("Please reload and try "):r.error("Something went wrong"),m(!1),i(o=>!o)}catch{r.error("Something went wrong"),i(o=>!o)}};return t.useEffect(()=>{i(s=>!s)},[]),e.jsxs("div",{className:"min-h-screen flex justify-center items-center bg-black",children:[e.jsx(O,{reCaptchaKey:"6Lc9HLspAAAAAEeiv-O77afc8UopufObtkGBfuBc",children:e.jsx(q,{onVerify:v,refreshReCaptcha:g})}),e.jsxs(S,{className:"mx-auto max-w-sm m-5 backdrop-blur bg-white/25",children:[e.jsx(T,{className:"space-y-1 flex items-center justify-center",children:e.jsx(L,{className:"text-2xl font-bold text-white justify-self-center",children:"Login"})}),e.jsx(E,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"email",className:"text-white",children:"Email"}),e.jsx(d,{id:"email",value:a,onChange:s=>x(s.target.value),placeholder:"Email",required:!0,type:"email"})]}),u&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"otp",className:"text-white",children:"OTP"}),e.jsx(d,{id:"otp",value:a,onChange:s=>j(s.target.value),placeholder:"OTP",required:!0,type:"number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"password",className:"text-white",children:u?"New Password":"Password"}),e.jsx(d,{id:"password",value:l,onChange:s=>p(s.target.value),placeholder:"Password",required:!0,type:"password"})]}),e.jsx(n,{className:"w-full",onClick:async()=>{await C()},disabled:h,children:h?e.jsxs("div",{className:"flex items-center justify-center gap-3",children:["Please Wait",e.jsx(P,{visible:!0,height:"35",width:"35",color:"white",ariaLabel:"triangle-loading",wrapperStyle:{},wrapperClass:""})]}):"Login"}),e.jsxs("div",{className:"text-white font-sm",children:["Don't have account?"," ",e.jsx(n,{color:"tertiary",variant:"link",style:{color:"white"},children:e.jsx("div",{onClick:()=>window.location.href="/signup",children:"Signup"})})]}),e.jsxs("div",{className:"text-white font-sm",children:["Go to Home Page"," ",e.jsx(n,{color:"tertiary",variant:"link",style:{color:"white"},children:e.jsx("div",{onClick:()=>y("/"),children:"Home Page"})})]})]})})]})]})}export{$ as default};
